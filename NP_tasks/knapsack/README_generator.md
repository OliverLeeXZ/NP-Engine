# 0/1 背包问题（Knapsack）造题脚本使用说明

## 概述

这是一个基于规则的0/1背包问题（0/1 Knapsack Problem）造题脚本。其目标是生成一系列物品，每个物品都有自己的重量和价值，并要求解答者在不超过背包总容量的前提下，选择一个物品子集，使其总价值最大化。

为了确保每个生成的问题都必然有解且解是已知的，此脚本采用了"植入解"的策略。具体步骤如下：
1.  **预设解集**: 首先确定一个物品子集作为"保证的"最优解。这些物品通常具有较高的"性价比"（价值/重量比）。
2.  **计算容量**: 根据解集中所有物品的总重量，设定一个略大于该总重量的背包容量。这个"略大于"的比例是可控的，用于调整难度。容量设置得越接近解集总重，难度越高。
3.  **生成干扰项**: 生成额外的"干扰"物品，用于迷惑解答者。这些物品分为几类：
    *   **性价比低的物品**: 重量不低，但价值不高。
    *   **"陷阱"物品**: 价值很高，但重量也非常大，选择它可能会导致无法装入其他更有价值的组合，从而使总价值降低。
    *   **填充物**: 重量和价值都较低的物品。
4.  **混合输出**: 将解集物品和干扰物品混合后，形成最终的问题。

通过这种方法，我们预先植入的解集就是一个有效且高质量的解，从而保证了问题的可解性。

## 使用方法

### 基本使用

默认情况下，脚本会生成5道中等难度的题目：

```bash
python generate_questions.py
```

### 指定参数

你可以通过命令行参数自定义生成的题目：

```bash
python generate_questions.py --num_questions 10 --difficulty hard --output my_knapsack_questions.json
```

## 超参数说明

### 预设难度

脚本的难度由多个内部参数共同决定，主要包括物品总数、解集大小、物品的价值重量分布以及背包容量的"紧张"程度。

-   `--difficulty`: 设置难度级别。可选值：`easy`, `medium`, `hard` (默认: `medium`)。
    -   **easy**: 物品总数较少 (20-40)，解与干扰项区别明显，背包容量相对宽松。
    -   **medium**: 物品总数中等 (50-70)，解与干扰项的性价比开始接近，容量更紧。
    -   **hard**: 物品总数多 (70-90)，许多物品的性价比都非常接近，背包容量非常紧张，对选择的精度要求很高。

### 核心参数

-   `--num_questions`: 生成的题目数量 (默认: 5)。
-   `--output`: 输出的JSON文件名 (默认: `generated_knapsack_questions.json`)。

*(注意：为了简化，此生成器暂未开放对内部参数（如物品数量、价值范围等）的直接命令行配置，但可以在脚本内部轻松扩展。)*

## 使用示例

### 生成5道简单、3道中等、2道困难题目（混合到一个文件）
```
python generate_questions.py --easy 5 --medium 3 --hard 2
```

### 生成10道简单题目和5道困难题目到单独文件
```
python generate_questions.py --easy 10 --hard 5 --separate
```

#### 只生成8道中等题目
```
python generate_questions.py --medium 8
```
### 指定输出文件名
```
python generate_questions.py --easy 3 --medium 2 --hard 1 --output my_knapsack_dataset.json
```
## 输出文件

脚本会生成两个JSON文件：

1.  **题目文件** (例如, `generated_knapsack_questions.json`):
    -   只包含生成的背包容量和物品列表（重量和价值），采用紧凑的JSON格式。
    -   这是你应该提供给解答者的文件。

2.  **答案文件** (例如, `..._with_answers.json`):
    -   包含完整的题目、一个由"植入法"生成的保证解以及生成元数据。
    -   用于验证和评估。

### 紧凑的JSON输出格式示例

```json
{
  "big_small": "small",
  "questions": {
    "question1": {
      "capacity": 150,
      "items": {
        "0": {"weight": 20, "value": 45},
        "1": {"weight": 80, "value": 70},
        "2": {"weight": 30, "value": 65},
        "3": {"weight": 10, "value": 5},
        "4": {"weight": 100, "value": 110}
      }
    }
  }
}
```
*(注意: 在这个示例中，最优解可能是 `[0, 2]`，总重量为50，总价值为110，这优于选择价值最高的物品 `4`)*

## 注意事项

-   **解的保证**: 脚本通过"植入解"确保每个问题至少有一个可行的、高质量的解。
-   **最优性**: 脚本提供的解是**有效**的，并且是生成时预设的最优解。但在极少数情况下，由于随机过程，可能会偶然产生另一个价值同样高的解。
-   **随机性**: 每次运行脚本都会生成不同的问题。 
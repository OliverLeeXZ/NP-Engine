# 图着色问题（Graph Coloring Problem）造题脚本使用说明

## 概述

这是一个基于规则的图着色问题（Graph Coloring Problem, GCP-D）造题脚本。其目标是生成一个无向图，并要求解答者为图中的每个顶点分配一个颜色，使得没有两个相邻的顶点共享相同的颜色。挑战在于使用最少的颜色数量完成着色。

为了确保每个生成的问题都必然有解，此脚本采用了"植入解"的策略。具体步骤如下：
1.  **预设颜色和分区**: 首先，脚本会确定顶点的数量 `n` 和一个基础颜色数 `k`。然后，它会将 `n` 个顶点随机地分配到 `k` 个不同的集合（分区）中，每个集合代表一种颜色。
2.  **构建保证可着色的图**: 脚本只在属于**不同**颜色分区的顶点之间建立边。它绝不会在同一个分区内的两个顶点之间创建边。这个核心规则保证了我们预设的分区本身就是一个有效的 `k-着色` 解。
3.  **增加难度**: 通过调整顶点数、颜色数（`k`值）和分区间的边密度，可以控制题目的难度。一个边更稠密的图通常更难找到其最优的着色方案。

通过这种方法，我们生成的每个图都保证至少有一个已知的有效着色方案。

## 使用方法

### 基本使用

默认情况下，脚本会生成5道中等难度的题目：

```bash
python generate_questions.py
```

### 指定参数

你可以通过命令行参数自定义生成的题目：

```bash
python generate_questions.py --num_questions 10 --difficulty hard --output my_gcp_questions.json
```

## 超参数说明

### 预设难度

脚本的难度由三个核心内部参数共同决定：顶点的数量、颜色数量和边密度。

-   `--difficulty`: 设置难度级别。可选值：`easy`, `medium`, `hard` (默认: `medium`)。
    -   **easy**: 顶点数 (10-20) 和颜色数 (3-4) 较少，边密度低 (25%)。
    -   **medium**: 顶点数 (25-35) 和颜色数 (5-7) 中等，边密度中等 (35%)。
    -   **hard**: 顶点数 (45-55) 和颜色数 (8-12) 较多，边密度高 (50%)。图变得更加稠密和复杂，使得寻找最小着色数变得非常困难。

### 核心参数

-   `--num_questions`: 生成的题目数量 (默认: 5)。
-   `--output`: 输出的JSON文件名 (默认: `generated_gcp_questions.json`)。

*(注意：为了简化，此生成器暂未开放对内部参数（如顶点数、颜色数）的直接命令行配置，但可以在脚本内部轻松扩展。)*

## 使用示例

### 1. 生成3道简单题目

```bash
python generate_questions.py --num_questions 3 --difficulty easy
```

### 2. 生成10道难题

```bash
python generate_questions.py --num_questions 10 --difficulty hard
```

## 输出文件

脚本会生成两个JSON文件：

1.  **题目文件** (例如, `generated_gcp_questions.json`):
    -   只包含生成的图（以邻接表形式），采用紧凑的JSON格式。
    -   这是你应该提供给解答者的文件。

2.  **答案文件** (例如, `..._with_answers.json`):
    -   包含完整的题目、一个由"植入法"生成的保证解（即一个有效的着色方案列表）以及生成元数据。
    -   用于验证和评估。

### 紧凑的JSON输出格式示例

```json
{
  "big_small": "big",
  "questions": {
    "question1": {
      "0": [2, 3],
      "1": [2, 3],
      "2": [0, 1],
      "3": [0, 1]
    }
  }
}
```
*(注意: 在这个示例图中, 一个有效的2-着色方案是 `[1, 1, 2, 2]`。)*

## 注意事项

-   **解的保证**: 脚本通过"植入解"确保每个问题至少有一个已知的有效着色方案。
-   **最优性**: 脚本保证存在一个 `k-着色` 解，但不保证 `k` 是该图的最小着色数（即色数）。找到图的真正色数仍然是问题的核心挑战。
-   **随机性**: 每次运行脚本都会生成不同的问题（不同的图结构和不同的基础着色）。

## 新功能特点：

1. **灵活的难度组合**：可以指定每种难度的题目数量
   - `--easy N`：生成N道简单题目
   - `--medium M`：生成M道中等题目  
   - `--hard P`：生成P道困难题目

2. **两种输出模式**：
   - **混合模式**（默认）：所有题目合并到一个文件
   - **分离模式**（`--separate`）：每种难度生成单独文件

3. **题目命名规则**：
   - 混合模式：`easy_question1`, `medium_question1`, `hard_question1`
   - 分离模式：`question1`, `question2`, ...

## 使用示例：

```bash
# 生成10道简单、5道中等、3道困难题目（混合到一个文件）
python generate_questions.py --easy 10 --medium 5 --hard 3

# 生成20道简单题目和10道困难题目到单独文件
python generate_questions.py --easy 20 --hard 10 --separate

# 只生成15道中等题目
python generate_questions.py --medium 15

# 指定输出文件名
python generate_questions.py --easy 5 --medium 5 --hard 5 --output my_gcp_dataset.json
```

## 输出信息：
脚本会显示详细的生成统计：
- 每种难度的题目数量
- 总题目数
- 平均顶点数
- 生成的文件路径

现在你可以根据需要灵活地生成不同数量和难度组合的图着色问题了！ 